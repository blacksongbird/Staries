<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>-El Destello Caído del Firmamento-</title>
  <link rel="stylesheet" href="./style.css">
  <link rel="shortcut icon" href="../logo.ico">

</head>
<body>
<!-- partial:index.partial.html -->
<head>
  <link href="https://fonts.googleapis.com/css?family=Annie+Use+Your+Telescope&display=swap" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css?family=Montserrat+Alternates:600|Montserrat:500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./button.css">
  <link rel="stylesheet" href="./player.css">
  <script src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons.js"></script>
  <script src="../js/removeBanner.js"></script>
  <!-- update the version number as needed -->
  <script defer src="../__/firebase/7.14.6/firebase-app.js"></script>
  <!-- include only the Firebase features as you need -->
  <script defer src="../__/firebase/7.14.6/firebase-auth.js"></script>
  <script defer src="../__/firebase/7.14.6/firebase-database.js"></script>
  <script defer src="../__/firebase/7.14.6/firebase-messaging.js"></script>
  <script defer src="../__/firebase/7.14.6/firebase-storage.js"></script>
  <script defer src="../__/firebase/7.14.6/firebase-firestore.js"></script>
  <!-- initialize the SDK after all desired features are loaded -->
  <script defer src="../__/firebase/init.js"></script>
  <script src="../firebase-utils.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      try {
        let app = firebase.app();
        StariesAccount.Observer();
      } catch (e) {
        console.error(e);
      }
    });
  </script>
</head>

<body>
  <div id="progress"></div>
<br>
        <div class="switch"><span class="switch-text">Modo Oscuro:</span>
            <span class="inner-switch">OFF</span>
        </div>
  <div class="container">
    <h1 style="font-family:'Annie Use Your Telescope';">-El Destello Caído del Firmamento-</h1>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <div id="app-cover">
        <div id="bg-artwork"></div>
        <div id="bg-layer"></div>
        <div id="player">
            <div id="player-track">
                <div id="album-name"></div>
                <div id="track-name"></div>
                <div id="track-time">
                    <div id="current-time"></div>
                    <div id="track-length"></div>
                </div>
                <div id="s-area">
                    <div id="ins-time"></div>
                    <div id="s-hover"></div>
                    <div id="seek-bar"></div>
                </div>
            </div>
            <div id="player-content">
                <div id="album-art">
                    <img src="destello.jpg" class="active" id="_1">
                    <div id="buffer-box">Buffering ...</div>
                </div>
                <div id="player-controls">
                    <div class="control">
                        <div class="button" id="play-pause-button">
                            <ion-icon name="play-circle" id="iconoboton"></ion-icon>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <br>
    <br>
    <br>
    <br>
    <span class="byline" style="font-family: 'Annie Use Your Telescope'; font-size:40px;">El Destello Caído del Firmamento - Gabriel Lobo</span>

    <p>Un chico común caminaba por la noche admirando el cielo nublado. Había ido a recoger leña para la cocina de su madre y recién volvía para ayudarla con sus quehaceres. Hacía bastante frío y llevaba horas tratando de reunir madera suficientemente seca para avivar el fuego. Seguramente su madre estaba preocupada por su tardanza.</p>

    <p>&emsp;&emsp;Pero el chico no podía evitarlo. Su amor por el firmamento era tan inmenso e irracional como hermoso. Era muy similar a esa profunda estupidez que cualquiera siente al estar enamorado. Iba consumido en sus propios pensamientos cuando vio como un destello brillante perforaba suavemente la nube gris que se veía a la distancia, dejando un trazo en el cielo que guiaba a lo profundo del bosque.</p>

    <p>&emsp;&emsp;El chico, nublado por su propia curiosidad, corrió rápidamente hacia él, tratando de alcanzarlo. Corrió y corrió, persiguiéndolo por entre los árboles, los matorrales y las plantas que daban vida a toda aquella arboleda.</p>

    <p>&emsp;&emsp;Cuando finalmente llegó al sitio donde el trazo dorado se extinguía, halló un enorme cráter. ¡Algo había caído del cielo! De ese firmamento del que él se encontraba tan loca y perdidamente enamorado. Alcanzó a ver un resplandor que proviene del fondo del cráter. Asustado y fascinado, se asomó para observar. Cuando el brillo intenso y dorado en lo profundo del hoyuelo se disipó, vio a una hermosa chica dormida tiernamente, ignorando todo lo ocurrido a su alrededor. Impresionado, el chico plasma en su memoria cada detalle de lo que está viendo, sin darle crédito a sus pequeños ojos color marrón.</p>

    <p>&emsp;&emsp;La chica, vestida con unas prendas resplandecientes del mismo color que el trazo de brillo que dejó atrás, abrió sus ojos para descubrir todo lo que había a su alrededor. Al ver al chico, éste soltó toda la leña que había recolectado y la dejó caer sobre la tierra. Fue entonces cuando, con todas sus fuerzas, consiguió ayudar a la chica a salir de la profundidad del cráter.</p>

    <p>Con desconfianza, el niño se arma de valor y exclama con curiosidad.</p>

    <p>&emsp;&emsp;—¿Quién eres?</p>

    <p>&emsp;&emsp;—Hola —dijo la niña al mismo tiempo que se limpiaba la tierra de su vestidito dorado—, me llamo Star. ¿De casualidad sabes dónde estoy?</p>

    <p>&emsp;&emsp;—Estamos en el bosque. No sé exactamente qué tan lejos nos encontramos de mi villa; ahí vivo con mi mamá. ¿Tú vienes del cielo?</p>

    <p>&emsp;&emsp;—¿Del cielo? —preguntó confundida— ¿Qué es el cielo?</p>

    <p>&emsp;&emsp;—Allá arriba, ¿lo ves? —dijo mientras señalaba el firmamento con su dedo— Es donde viven las estrellas —contestó el niño.</p>

    <p>&emsp;&emsp;—¿Las estrellas?</p>

    <p>&emsp;&emsp;—Ya sabes, esos lindos puntitos brillantes que se ven por la noche y que no paran de tintinear como si se sonrieran entre sí.</p>

    <p>&emsp;&emsp;—¿La noche? No entiendo de qué hablas. Quiero volver a casa —sollozó la pequeña con los ojos vidriosos.</p>

    <p>&emsp;&emsp;—¿Y dónde vives?</p>

    <p>&emsp;&emsp;—Vivo con mi familia, pero me perdí y no sé dónde están. Lo último que recuerdo fue ver un enorme globo color verde con azul, luego me desmayé y desperté aquí.</p>

    <p>&emsp;&emsp;—Mira, tengo una idea. Ven conmigo y quédate en mi casa mientras encontramos a tu familia.</p>

    <p>&emsp;&emsp;—Está bien —contestó la chica como si no le quedara ninguna otra opción.</p>

    <p>Después de caminar un rato a través del bosque, logran ver a la distancia el humo de una de las casas de la villa. La chimenea destacaba por sobre los árboles bajos que la rodeaban, delatando su ubicación a todos aquellos que fueran suficientemente observadores para notarlo.</p>

    <p>&emsp;&emsp;Al llegar a su casa, el chico le explicó a su madre lo ocurrido, quien con mucho gusto aceptó acoger a la niña hasta que encontrara a su familia.</p>

    <p>&emsp;&emsp;Fue entonces cuando le prepararon un rinconcito a Star para que durmiera y descansara hasta la mañana siguiente. Cuando el chico estaba a punto de irse a dormir, su madre le susurró con la intención de que la niña no los escuchara hablar.</p>

    <p>&emsp;&emsp;—Hijo, por favor, escúchame con atención —dijo con un tono bajo para evitar despertar a la chica—. No te fíes de esa niña.</p>

    <p>&emsp;&emsp;—¿Por qué, mamá?</p>

    <p>&emsp;&emsp;—No sabes qué es ella, ¿verdad?</p>

    <p>&emsp;&emsp;—Mmmm.... no. Yo solo la ví caer del cielo y la encontré en el bosque —contestó confundido.</p>

    <p>&emsp;&emsp;—¿Recuerdas la leyenda que te contaba cuando eras un poco más pequeño?</p>

    <p>&emsp;&emsp;—¿La del hombre que se iba al cielo con una estrella? —preguntó curioso, imaginándose a que quería llegar su madre con esa charla.</p>

    <p>&emsp;&emsp;—Si, esa. Mira, hijo, ella es una estrella. Y cuando una estrella se pierde y cae en este mundo terrenal, ya no puede volver a iluminar el firmamento. La única forma de volver allá arriba es llevándose consigo el alma de un terrano. Escúchame bien. Ni se te ocurra contarle esto a ella —advirtió con voz grave y firme para respaldar su veredicto.</p>

    <p>&emsp;&emsp;—De acuerdo, no le diré nada —acató el joven con desánimo.</p>

    <p>Al día siguiente, el niño regresó al bosque para recoger más leña como de costumbre. Aunque esta vez, llevaba a una compañera de viaje.</p>

    <p>&emsp;&emsp;—¿Por qué vamos a regresar al bosque? —preguntó Star con curiosidad e inocencia.</p>

    <p>&emsp;&emsp;—Mi mamá necesita más leña para la cocina y para mis vecinos, y como soy el más pequeño, en lo único que puedo ayudar en la villa es a recoger leña para todos.</p>

    <p>&emsp;&emsp;—Entiendo. ¿Y cuándo vamos a regresar?</p>

    <p>&emsp;&emsp;—Creo que hasta la noche. Depende de cuánta leña recojamos lo antes posible. Aunque siempre me gusta esperar para ver el cielo cuando oscurece —explicó el niño con ilusión.</p>

    <p>&emsp;&emsp;—¿Para qué quieres ver el cielo en la noche?</p>

    <p>&emsp;&emsp;—Para ver las estrellas.</p>

    <p>&emsp;&emsp;—¿Los puntitos brillantes?</p>

    <p>&emsp;&emsp;—Sí, las estrellas.</p>

    <p>&emsp;&emsp;—¿Y por qué te gustan las estrellas?</p>

    <p>El niño no respondió. Siguieron con su extenso caminar hasta que finalmente cayó la noche. Por suerte, esta vez no había nube alguna que poblara el firmamento. Fue entonces cuando Star levantó la mirada y señaló el cielo empapado de estrellas.</p>

    <p>&emsp;&emsp;—¡Ahí están! ¡Son mi familia! —exclamó con alegría.</p>

    <p>&emsp;&emsp;—¿Tu familia? —preguntó extrañado.</p>

    <p>&emsp;&emsp;—¡Sí! Van vestidos igual que yo. Y brillan allá arriba. ¡Míralos! —gritó mientras movía sus brazos por sobre su cabeza para llamar su atención.</p>

    <p>&emsp;&emsp;—Pero esas son estrellas.</p>

    <p>&emsp;&emsp;—¡No! ¿Acaso no lo ves? Son mi familia.</p>

    <p>&emsp;&emsp;—Es que no lo entiendes. ¿Ya te diste cuenta de que te caíste del cielo? ¡No tienes idea de lo mucho que extrañan tus amigas las estrellas brillar contigo! —exclamó el niño con entusiasmo.</p>

    <p>&emsp;&emsp;—¿Pero cómo regreso allá arriba, con ellos? —preguntó al borde del llanto.</p>

    <p>&emsp;&emsp;—Solo necesitas conseguir a un terrano —explicó el niño.</p>

    <p>&emsp;&emsp;—¿Un terrano?</p>

    <p>&emsp;&emsp;—Sí, alguien como yo, un humano. Solo tenemos que hallar a alguien que te ayude. ¡Lo buscaremos mañana!</p>

    <p>&emsp;&emsp;—De acuerdo.</p>

    <p>&emsp;&emsp;—Bueno, deberíamos de volver ya —dijo el niño.</p>

    <p>&emsp;&emsp;—¡Espera! ¿Crees que podamos quedarnos acá un rato más? —preguntó con timidez. El niño dudó un poco y luego asintió esbozando una sonrisa.</p>

    <p>Antes de irse, vieron como el firmamento se pintaba de brillo con el tintinear de la familia de Star. La brisa nocturna refrescaba sus rostros mientras admiraban ese precioso paisaje. Cautivados por lo simple, se dieron cuenta de que estaban exactamente donde debían estar, pese a que creyeran que debían estar en sus respectivos hogares. La verdad era que, en ese instante, en ese lugar, en ese ahora, era su destino estar el uno con el otro, sin importar el hecho de que pertenecían a mundos totalmente opuestos.</p>

    <p>&emsp;&emsp;Al regresar a casa, la madre los recibió con una cena y un poco de leche tibia. Era el mayor manjar que Star había probado nunca. Aunque puede que eso haya tenido algo que ver con el hecho de que nunca había sentido lo que sea que el hambre fuera antes del día anterior. ¡Aseguraba que ella no necesitaba comer! Pero por alguna razón, el brillar intenso que emitía desde lo más profundo de su ser se apagaba lentamente. Si no regresaba pronto a su hogar, se quedaría perdida en la Tierra por el resto de su vida. Y no podría volver a ver a su familia nunca más. Al día siguiente, por la tarde, el chico acudió a su madre para pedirle ayuda.</p>

    <p>&emsp;&emsp;—Mamá, necesitamos regresar a Star al cielo —dijo el niño con preocupación.</p>

    <p>&emsp;&emsp;—Ya te lo dije, hijo. La única forma es que un humano la ayude a volver. Si una estrella se cae del cielo, una de sus hermanas baja a buscarla cada noche con esperanza y anhelo de que pueda llevarla de vuelta a su hogar, pero cuando siente que el brillo de la estrella perdida se apaga, ya es demasiado tarde. Es algo que ocurre cada 100 años. Pero la única forma de que esa estrella regrese es con la ayuda de un terrano.</p>

    <p>&emsp;&emsp;—Mamá, ¿cómo es que sabes tanto de eso?</p>

    <p>&emsp;&emsp;—Mi mamá era una estrella, hijo. Tu abuela cayó del cielo cuando era muy muy pequeña, y mi papá la encontró en el bosque. Él no podía abandonar a sus hermanos, por eso no pudo ayudar a tu abuela a regresar a casa. Ella perdió su esencia de estrella y se convirtió en una terrana.</p>

    <p>&emsp;&emsp;—Pero yo no tengo hermanos que cuidar, ¿por qué no puedo ayudarla? —preguntó algo molesto.</p>

    <p>&emsp;&emsp;—Porque no, no puedes. No quiero que pienses más en esa idea. Te lo prohíbo.</p>

    <p>&emsp;&emsp;—Pero mamá...</p>

    <p>&emsp;&emsp;—¡Ya basta! ¡No es no, y te lo prohíbo! —gritó su madre con fastidio y frustración. Inmediatamente, el niño corrió fuera de su casa y huyó al bosque con sus ojos llenos de lágrimas. Sollozando y lamentándose, se refugió en el cráter donde había encontrado a Star hace dos días. Después de unos minutos, escuchó la melodiosa y tierna voz de Star a la distancia, llamándolo. Salió del cráter y se limpió la cara, secándose las lágrimas con sus antebrazos.</p>

    <p>&emsp;&emsp;—¿Estás bien? Oí que tu mamá te gritó y luego no estabas en tu casa, así que salí a buscarte.</p>

    <p>&emsp;&emsp;—Estoy bien... —dijo el niño mientras trataba de disimular sus ojos vidriosos bajando la mirada.</p>

    <p>&emsp;&emsp;—Oye, el cielo está despejado. ¡Vamos a ver las estrellas!</p>

    <p>&emsp;&emsp;—De acuerdo —exclamó, algo resignado.</p>

    <p>Caminaron hasta llegar a un pequeño montículo libre de árboles que resaltaba en el bosque, permitiendo ver el cielo con mucha más claridad. Cuando las estrellas aparecieron, Star comenzó a recuperar su brillo. Fue entonces cuando el chico supo que no podía dejar que le pasara lo mismo que le ocurrió a su abuela. Tenía que ayudarla. Y estaba dispuesto a dejar todo atrás para hacerlo.</p>

    <p>&emsp;&emsp;Después de un rato, sintió como la tierra bajo sus pies empezaba a temblar, y vio a uno de los destellos dorados que poblaban el firmamento. Entonces, al ver que éste se acercaba cada vez más, se asustó por un segundo, hasta que el brillo resplandeciente se disipó, revelando la figura de una mujer hermosa de cabello negro con un vestido dorado, que resplandecía de la misma forma que Star. Fue entonces cuando ésta comenzó a llorar de alegría. Pensaba que nunca más volvería a ver a su hermana.</p>

    <p>&emsp;&emsp;—¡Star! ¡Al fin te encuentro! Hemos estado buscándote angustiados.</p>

    <p>&emsp;&emsp;—Perdón, me caí y ahora no puedo volver al cielo.</p>

    <p>&emsp;&emsp;—Lo sé, necesitas que un terrano te ayude a subir.</p>

    <p>&emsp;&emsp;—¡Yo te ayudaré! —dijo el chico, que no tenía idea de la gravedad de sus palabras.</p>

    <p>&emsp;&emsp;—Pero si eres tan solo un niño. Tienes toda tu vida por vivir. Si te vas con nosotros, deberás abandonar toda tu vida de terrano y dejarlo todo atrás. ¿Estás seguro?</p>

    <p>&emsp;&emsp;—Mientras Star pueda volver a casa contigo, haré lo que quieras —dijo mientras volvía a ver a la chica que cayó del cielo con una sonrisa empapada en lágrimas. Fue el acto de amor más puro y honesto que las estrellas habían visto en más de 100 años.</p>

    <p>&emsp;&emsp;—Está bien. Si estás tan seguro, te lo agradezco con toda mi alma —contestó la estrella. Posteriormente, ésta dirigió su mirada a Star y tomó su mano.</p>

    <p>&emsp;&emsp;—Toma mi mano —dijo Star mientras extendía su brillante manita hacia el niño. Luego de pensarlo un minuto, miró atrás y observó su villa. Recordó a su madre y a sus vecinos, a las personas a las que él llamaba familia. Sin embargo, recordó lo que su madre una vez le dijo: "Pensando en tí mismo jamás alcanzaras tu propia felicidad. Si no sacrificamos todo lo que tenemos para ayudar a alguien más, ¿qué sentido crees que tendría nuestra vida?".</p>

    <p>Fue entonces cuando, con esas palabras en su cabeza y en su corazón, le dió su mano a Star y sintió que un calor inmenso irradiaba desde lo más profundo de su ser. Volvió su mirada hacia arriba y sintió como sus pies se desprendían de la tierra. Después de unos segundos, vio todo el planeta desde arriba, y dio gracias por alcanzar a ver un paisaje tan hermoso, y cuando contempló el cielo, se dio cuenta de que todas las estrellas lo miraban al subir, admirando su heroico acto de amor y desprendimiento.</p>

    <p>&emsp;&emsp;Se trataba del firmamento más precioso e invaluable que sus ojos llegarían a ver jamás. Y cuando su cuerpo dejó la Tierra por completo y se le hacía cada vez más difícil respirar, supo que todo lo que había hecho había valido la pena. Y al dejar su cuerpo terrenal atrás y exhalar su último suspiro, su alma se unió a las estrellas y brilló por el resto de la eternidad en el firmamento del cual estaba tan irracional y tontamente enamorado.</p>

  </div>
  <div class="col-md-12 text-center"style="z-index: 5;" align="center">
    <a class="btn btn-coffee btn-border" href="../La Condición Humana/loader/index.html" style="z-index: 3; margin-left: auto;margin-bottom: 100px; outline: none;color: 	#AE599C; text-align: center;border-color: 	#AE599C;font-size:20px;">Leer<br>La Condición<br>Humana...</a>
    <br>
    <a class="btn btn-coffee btn-border" href="El Destello Caído del Firmamento.html" style="z-index: 3; margin-left: auto;margin-top: -150px; outline: none;color: 	#AE599C; text-align: center;border-color: #AE599C;font-size:20px;">Volver al Índice</a>
  </div>

</body>
<!-- partial -->
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script><script  src="./script.js"></script>
  <link rel="stylesheet" href="../css/dark.css">
    <script src="../js/dark.js"></script>
  <script type="text/javascript">
  $(function()
{
    var playerTrack = $("#player-track"), bgArtwork = $('#bg-artwork'), bgArtworkUrl, albumName = $('#album-name'), trackName = $('#track-name'), albumArt = $('#album-art'), sArea = $('#s-area'), seekBar = $('#seek-bar'), trackTime = $('#track-time'), insTime = $('#ins-time'), sHover = $('#s-hover'), playPauseButton = $("#play-pause-button"),  i = playPauseButton.find('ion-icon'), tProgress = $('#current-time'), tTime = $('#track-length'), seekT, seekLoc, seekBarPos, cM, ctMinutes, ctSeconds, curMinutes, curSeconds, durMinutes, durSeconds, playProgress, bTime, nTime = 0, buffInterval = null, tFlag = false, albums = ['Stupid Deep'], trackNames = ['Jon Bellion'], albumArtworks = ['_1'], trackUrl = ['destello.mp3'], playPreviousTrackButton = $('#play-previous'), playNextTrackButton = $('#play-next'), currIndex = -1;

    function playPause()
    {
        setTimeout(function()
        {
            if(audio.paused)
            {
                playerTrack.addClass('active');
                albumArt.addClass('active');
                checkBuffering();
                i.attr('name','pause');
                audio.play();
            }
            else
            {
                playerTrack.removeClass('active');
                albumArt.removeClass('active');
                clearInterval(buffInterval);
                albumArt.removeClass('buffering');
                i.attr('name','play-circle');
                audio.pause();
            }
        },300);
    }


	function showHover(event)
	{
		seekBarPos = sArea.offset();
		seekT = event.clientX - seekBarPos.left;
		seekLoc = audio.duration * (seekT / sArea.outerWidth());

		sHover.width(seekT);

		cM = seekLoc / 60;

		ctMinutes = Math.floor(cM);
		ctSeconds = Math.floor(seekLoc - ctMinutes * 60);

		if( (ctMinutes < 0) || (ctSeconds < 0) )
			return;

        if( (ctMinutes < 0) || (ctSeconds < 0) )
			return;

		if(ctMinutes < 10)
			ctMinutes = '0'+ctMinutes;
		if(ctSeconds < 10)
			ctSeconds = '0'+ctSeconds;

        if( isNaN(ctMinutes) || isNaN(ctSeconds) )
            insTime.text('--:--');
        else
		    insTime.text(ctMinutes+':'+ctSeconds);

		insTime.css({'left':seekT,'margin-left':'-21px'}).fadeIn(0);

	}

    function hideHover()
	{
        sHover.width(0);
        insTime.text('00:00').css({'left':'0px','margin-left':'0px'}).fadeOut(0);
    }

    function playFromClickedPos()
    {
        audio.currentTime = seekLoc;
		seekBar.width(seekT);
		hideHover();
    }

    function updateCurrTime()
	{
        nTime = new Date();
        nTime = nTime.getTime();

        if( !tFlag )
        {
            tFlag = true;
            trackTime.addClass('active');
        }

		curMinutes = Math.floor(audio.currentTime / 60);
		curSeconds = Math.floor(audio.currentTime - curMinutes * 60);

		durMinutes = Math.floor(audio.duration / 60);
		durSeconds = Math.floor(audio.duration - durMinutes * 60);

		playProgress = (audio.currentTime / audio.duration) * 100;

		if(curMinutes < 10)
			curMinutes = '0'+curMinutes;
		if(curSeconds < 10)
			curSeconds = '0'+curSeconds;

		if(durMinutes < 10)
			durMinutes = '0'+durMinutes;
		if(durSeconds < 10)
			durSeconds = '0'+durSeconds;

        if( isNaN(curMinutes) || isNaN(curSeconds) )
            tProgress.text('00:00');
        else
		    tProgress.text(curMinutes+':'+curSeconds);

        if( isNaN(durMinutes) || isNaN(durSeconds) )
            tTime.text('00:00');
        else
		    tTime.text(durMinutes+':'+durSeconds);

        if( isNaN(curMinutes) || isNaN(curSeconds) || isNaN(durMinutes) || isNaN(durSeconds) )
            trackTime.removeClass('active');
        else
            trackTime.addClass('active');


		seekBar.width(playProgress+'%');

		if( playProgress == 100 )
		{
			i.attr('name','play-circle');
			seekBar.width(0);
            tProgress.text('00:00');
            albumArt.removeClass('buffering').removeClass('active');
            clearInterval(buffInterval);
		}
    }

    function checkBuffering()
    {
        clearInterval(buffInterval);
        buffInterval = setInterval(function()
        {
            if( (nTime == 0) || (bTime - nTime) > 1000  )
                albumArt.addClass('buffering');
            else
                albumArt.removeClass('buffering');

            bTime = new Date();
            bTime = bTime.getTime();

        },100);
    }

    function selectTrack(flag)
    {
        if( flag == 0 || flag == 1 )
            ++currIndex;
        else
            --currIndex;

        if( (currIndex > -1) && (currIndex < albumArtworks.length) )
        {
            if( flag == 0 )
                i.attr('name','play-circle');
            else
            {
                albumArt.removeClass('buffering');
                i.attr('name','pause');
            }

            seekBar.width(0);
            trackTime.removeClass('active');
            tProgress.text('00:00');
            tTime.text('00:00');

            currAlbum = albums[currIndex];
            currTrackName = trackNames[currIndex];
            currArtwork = albumArtworks[currIndex];

            audio.src = trackUrl[currIndex];

            nTime = 0;
            bTime = new Date();
            bTime = bTime.getTime();

            if(flag != 0)
            {
                audio.play();
                playerTrack.addClass('active');
                albumArt.addClass('active');

                clearInterval(buffInterval);
                checkBuffering();
            }

            albumName.text(currAlbum);
            trackName.text(currTrackName);
            albumArt.find('img.active').removeClass('active');
            $('#'+currArtwork).addClass('active');

            bgArtworkUrl = $('#'+currArtwork).attr('src');

            bgArtwork.css({'background-image':'url('+bgArtworkUrl+')'});
        }
        else
        {
            if( flag == 0 || flag == 1 )
                --currIndex;
            else
                ++currIndex;
        }
    }

    function initPlayer()
	{
        audio = new Audio();

		selectTrack(0);

		audio.loop = true;

		playPauseButton.on('click',playPause);

		sArea.mousemove(function(event){ showHover(event); });

        sArea.mouseout(hideHover);

        sArea.on('click',playFromClickedPos);

        $(audio).on('timeupdate',updateCurrTime);

        playPreviousTrackButton.on('click',function(){ selectTrack(-1);} );
        playNextTrackButton.on('click',function(){ selectTrack(1);});
	}

	initPlayer();
});
  </script>
</body>
</html>
