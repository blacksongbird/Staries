<!DOCTYPE html>

<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Memoria 13</title>
  <link rel="stylesheet" href="../../css/stylemym.css">
  <link rel="shortcut icon" href="../../logo.ico">
  <script src="../../js/removeBanner.js"></script>

</head>
<body>
    <!-- update the version number as needed -->
<script defer src="../../__/firebase/7.14.6/firebase-app.js"></script>
<!-- include only the Firebase features as you need -->
<script defer src="../../__/firebase/7.14.6/firebase-auth.js"></script>
<script defer src="../../__/firebase/7.14.6/firebase-database.js"></script>
<script defer src="../../__/firebase/7.14.6/firebase-messaging.js"></script>
<script defer src="../../__/firebase/7.14.6/firebase-storage.js"></script>
<script defer src="../../__/firebase/7.14.6/firebase-firestore.js"></script>
<!-- initialize the SDK after all desired features are loaded -->
<script defer src="../../__/firebase/init.js"></script>
<script src="../../firebase-utils.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
      try {
        let app = firebase.app();
        StariesAccount.Observer();
      } catch (e) {
        console.error(e);
      }
    });
  </script>
<!-- partial:index.partial.html -->
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css?family=Montserrat+Alternates:600|Montserrat:500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../../css/buttonmym.css">
  <link rel="stylesheet" href="../../css/playermym.css">
  <script src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons.js"></script>
</head>

<body>
  <div id="progress"></div>
<br>
        <div class="switch"><span class="switch-text">Modo Oscuro:</span>
            <span class="inner-switch">OFF</span>
        </div>
  <div class="container">
    <h1>Para Star...</h1>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <div id="app-cover">
        <div id="bg-artwork"></div>
        <div id="bg-layer"></div>
        <div id="player">
            <div id="player-track">
                <div id="album-name"></div>
                <div id="track-name"></div>
                <div id="track-time">
                    <div id="current-time"></div>
                    <div id="track-length"></div>
                </div>
                <div id="s-area">
                    <div id="ins-time"></div>
                    <div id="s-hover"></div>
                    <div id="seek-bar"></div>
                </div>
            </div>
            <div id="player-content">
                <div id="album-art">
                    <img src="../../img/mym/Memory13Art.png" class="active" id="_1">
                    <div id="buffer-box">Buffering ...</div>
                </div>
                <div id="player-controls">
                    <div class="control">
                        <div class="button" id="play-pause-button">
                            <ion-icon name="play-circle" id="iconoboton"></ion-icon>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <br>
    <br>
    <br>
    <br>
    <br>
    <span class="byline">Memoria 13</span><br><br><br>
    <span class="byline">Melodías y Memorias - Gabriel Lobo</span>

      <p>Domingo 12 de Mayo, 2019. Mira, sinceramente no sé si alguna vez sepas que esto está escrito para ti, pero después de nuestras cortas charlas de regreso a la salida del colegio, creo que te mereces conocer toda la historia. Sé que quizás haya sido menos dramático de lo que lo escribí, pero creo que le he hecho justicia a mis recuerdos, y creo de verdad que ojearlo un poco vale la pena.</p>


      <p>&emsp;&emsp;Probablemente nuestras conversaciones de todos los jueves por la noche no sean nada más que charlas triviales para ti. Y aunque me falta evidencia para asegurarlo, quiero creer que no significan solo eso; por eso estoy tomando este salto de fe. Aunque estuviste presente durante todo este desenlace, no tienes idea de todo lo que pasó previo a ello. No sé si Ever te habrá dicho alguna cosa —aunque lo dudo, es muy olvidadiza—, o quizás Sea te habló de lo ocurrido. Pero si no es así, déjame decirte que espero que no me juzgues por los monstruos que están encerrados en mi clóset. Aunque no te culpo si alguna vez lo haces.</p>

      <p>&emsp;&emsp;Han pasado muchas cosas en estos dos últimos años. Hice muchos nuevos amigos, luego los perdí a casi todos. Después hallé a otro grupo que me acogió bajo su ala. Los perdí también. Hubo centenares de dramas de por medio. Peleas y destrozos. Llantos y sí, también risas. Pero al final acabamos recordando solo lo malo. Detesto hablar de estas cosas de ese modo contigo. Quisiera poder decirte que todo fue hermoso. Pero no lo fue. Hubo momentos dolorosos. Siempre consigo encontrar a alguien del cual sujetarme. Bueno, casi siempre. Aunque ahora trato de no depender tanto de los demás. Tampoco quiero que creas que no aprecio a los pocos que aún considero amigos. Simplemente trato de mantener una “precaución emocional”.</p>

      <p>&emsp;&emsp;Todo lo sucedido con ella se acabó, o al menos es lo que siento ahora mismo, aunque me sentí exactamente igual hace un año. ¡Pero hey! Volvimos al principio, como todo comenzó. Perdona, sé que me estoy yendo por la tangente. Es un defecto. Debo decirte que el libro está casi concluido. Estas son, de hecho, las últimas palabras que estarán impresas en él —siempre y cuando la editorial no me exija un capítulo más—. No recuerdo bien si fue ayer o antier, o quizás el día previo a ese, pero me dijiste que deseabas leer algo que yo hubiese escrito, a lo que respondí que quería ver más de tus dibujos primero. Pues bien, esto es lo mejor que he podido escribir —hasta ahora, ya que, como escritor, espero superar mis propias expectativas, también—. La vida es una carretera. Y cada auto que pasa, sin importar la dirección o el sentido, es una vida; otra persona con la que nos cruzamos, algunas para quedarse, otras para dejar su respectiva marca en el chasis de nuestro corazón. Debo decir que, pese a todo lo ocurrido con la serpiente, mi ansiedad y mis temores a la conclusión de relaciones, todo ocurrió por un motivo. Hay alguien allá arriba que me ama, y a ti también, así que cúlpalo a Él, ya que todo esto fue su idea.</p>

      <p>&emsp;&emsp;En fin, decírtelo todo por acá es algo seco y grosero, pero te prometo que, si te quedas en mi carretera durante mucho tiempo —que espero que sí, ya que ha estado muy solitaria últimamente—, un día iremos a ver las estrellas. No importa dónde ni cuándo, pero cuando lo hagamos, te contaré una historia. La historia de mis <b style="color: #57a639">memorias</b>, la historia de cómo me quebré el corazón para reparar los de otras personas, incluso pese a que ellas no se dieron cuenta. Y entonces allí, bajo una noche estrellada, te lo contaré todo, sin mentiras ni modestias, y verás como todas las estrellas prestarán atención mientras tintinean al ritmo de la más hermosa <b style="color: #800080;">melodía</b> que habrás escuchado en tu vida.</p>

  </div>
  <div class="col-md-12 text-center"style="z-index: 5;" align="center">
    <a class="btn btn-coffee btn-border" href="../../Canciones y Recuerdos.html" style="z-index: 3; margin-left: auto;margin-bottom: 100px; outline: none;color: #800080; text-align: center;border-color: #800080;font-size:20px;">Leer Canciones<br>y<br>Recuerdos...</a>
    <br>
    <a class="btn btn-coffee btn-border" href="../../Melodías y Memorias.html#service" style="z-index: 3; margin-left: auto;margin-top: -150px; outline: none;color: #57a639; text-align: center;border-color: #57a639;font-size:20px;">Volver al Índice</a>
  </div>

</body>
<!-- partial -->
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script><script src="../../js/scriptread.js"></script>
  <link rel="stylesheet" href="../../css/dark.css">
    <script src="../../js/dark.js"></script>
  <script type="text/javascript">
  $(function()
{
    var playerTrack = $("#player-track"), bgArtwork = $('#bg-artwork'), bgArtworkUrl, albumName = $('#album-name'), trackName = $('#track-name'), albumArt = $('#album-art'), sArea = $('#s-area'), seekBar = $('#seek-bar'), trackTime = $('#track-time'), insTime = $('#ins-time'), sHover = $('#s-hover'), playPauseButton = $("#play-pause-button"),  i = playPauseButton.find('ion-icon'), tProgress = $('#current-time'), tTime = $('#track-length'), seekT, seekLoc, seekBarPos, cM, ctMinutes, ctSeconds, curMinutes, curSeconds, durMinutes, durSeconds, playProgress, bTime, nTime = 0, buffInterval = null, tFlag = false, albums = ['A Sky Full Of Stars'], trackNames = ['Coldplay'], albumArtworks = ['_1'], trackUrl = ['memoria13.mp3'], playPreviousTrackButton = $('#play-previous'), playNextTrackButton = $('#play-next'), currIndex = -1;

    function playPause()
    {
        setTimeout(function()
        {
            if(audio.paused)
            {
                playerTrack.addClass('active');
                albumArt.addClass('active');
                checkBuffering();
                i.attr('name','pause');
                audio.play();
            }
            else
            {
                playerTrack.removeClass('active');
                albumArt.removeClass('active');
                clearInterval(buffInterval);
                albumArt.removeClass('buffering');
                i.attr('name','play-circle');
                audio.pause();
            }
        },300);
    }


	function showHover(event)
	{
		seekBarPos = sArea.offset();
		seekT = event.clientX - seekBarPos.left;
		seekLoc = audio.duration * (seekT / sArea.outerWidth());

		sHover.width(seekT);

		cM = seekLoc / 60;

		ctMinutes = Math.floor(cM);
		ctSeconds = Math.floor(seekLoc - ctMinutes * 60);

		if( (ctMinutes < 0) || (ctSeconds < 0) )
			return;

        if( (ctMinutes < 0) || (ctSeconds < 0) )
			return;

		if(ctMinutes < 10)
			ctMinutes = '0'+ctMinutes;
		if(ctSeconds < 10)
			ctSeconds = '0'+ctSeconds;

        if( isNaN(ctMinutes) || isNaN(ctSeconds) )
            insTime.text('--:--');
        else
		    insTime.text(ctMinutes+':'+ctSeconds);

		insTime.css({'left':seekT,'margin-left':'-21px'}).fadeIn(0);

	}

    function hideHover()
	{
        sHover.width(0);
        insTime.text('00:00').css({'left':'0px','margin-left':'0px'}).fadeOut(0);
    }

    function playFromClickedPos()
    {
        audio.currentTime = seekLoc;
		seekBar.width(seekT);
		hideHover();
    }

    function updateCurrTime()
	{
        nTime = new Date();
        nTime = nTime.getTime();

        if( !tFlag )
        {
            tFlag = true;
            trackTime.addClass('active');
        }

		curMinutes = Math.floor(audio.currentTime / 60);
		curSeconds = Math.floor(audio.currentTime - curMinutes * 60);

		durMinutes = Math.floor(audio.duration / 60);
		durSeconds = Math.floor(audio.duration - durMinutes * 60);

		playProgress = (audio.currentTime / audio.duration) * 100;

		if(curMinutes < 10)
			curMinutes = '0'+curMinutes;
		if(curSeconds < 10)
			curSeconds = '0'+curSeconds;

		if(durMinutes < 10)
			durMinutes = '0'+durMinutes;
		if(durSeconds < 10)
			durSeconds = '0'+durSeconds;

        if( isNaN(curMinutes) || isNaN(curSeconds) )
            tProgress.text('00:00');
        else
		    tProgress.text(curMinutes+':'+curSeconds);

        if( isNaN(durMinutes) || isNaN(durSeconds) )
            tTime.text('00:00');
        else
		    tTime.text(durMinutes+':'+durSeconds);

        if( isNaN(curMinutes) || isNaN(curSeconds) || isNaN(durMinutes) || isNaN(durSeconds) )
            trackTime.removeClass('active');
        else
            trackTime.addClass('active');


		seekBar.width(playProgress+'%');

		if( playProgress == 100 )
		{
			i.attr('name','play-circle');
			seekBar.width(0);
            tProgress.text('00:00');
            albumArt.removeClass('buffering').removeClass('active');
            clearInterval(buffInterval);
		}
    }

    function checkBuffering()
    {
        clearInterval(buffInterval);
        buffInterval = setInterval(function()
        {
            if( (nTime == 0) || (bTime - nTime) > 1000  )
                albumArt.addClass('buffering');
            else
                albumArt.removeClass('buffering');

            bTime = new Date();
            bTime = bTime.getTime();

        },100);
    }

    function selectTrack(flag)
    {
        if( flag == 0 || flag == 1 )
            ++currIndex;
        else
            --currIndex;

        if( (currIndex > -1) && (currIndex < albumArtworks.length) )
        {
            if( flag == 0 )
                i.attr('name','play-circle');
            else
            {
                albumArt.removeClass('buffering');
                i.attr('name','pause');
            }

            seekBar.width(0);
            trackTime.removeClass('active');
            tProgress.text('00:00');
            tTime.text('00:00');

            currAlbum = albums[currIndex];
            currTrackName = trackNames[currIndex];
            currArtwork = albumArtworks[currIndex];

            audio.src = trackUrl[currIndex];

            nTime = 0;
            bTime = new Date();
            bTime = bTime.getTime();

            if(flag != 0)
            {
                audio.play();
                playerTrack.addClass('active');
                albumArt.addClass('active');

                clearInterval(buffInterval);
                checkBuffering();
            }

            albumName.text(currAlbum);
            trackName.text(currTrackName);
            albumArt.find('img.active').removeClass('active');
            $('#'+currArtwork).addClass('active');

            bgArtworkUrl = $('#'+currArtwork).attr('src');

            bgArtwork.css({'background-image':'url('+bgArtworkUrl+')'});
        }
        else
        {
            if( flag == 0 || flag == 1 )
                --currIndex;
            else
                ++currIndex;
        }
    }

    function initPlayer()
	{
        audio = new Audio();

		selectTrack(0);

		audio.loop = true;

		playPauseButton.on('click',playPause);

		sArea.mousemove(function(event){ showHover(event); });

        sArea.mouseout(hideHover);

        sArea.on('click',playFromClickedPos);

        $(audio).on('timeupdate',updateCurrTime);

        playPreviousTrackButton.on('click',function(){ selectTrack(-1);} );
        playNextTrackButton.on('click',function(){ selectTrack(1);});
	}

	initPlayer();
});
  </script>
</body>
</html>
