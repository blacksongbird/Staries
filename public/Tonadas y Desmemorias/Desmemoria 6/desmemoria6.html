<!DOCTYPE html>

<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Desmemoria 6</title>
  <link rel="stylesheet" href="../../css/styletyd.css">
  <link rel="stylesheet" href="../../css/textmessage.css">
  <link rel="shortcut icon" href="../../logo.ico">
  <script src="../../js/removeBanner.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css?family=Montserrat+Alternates:600|Montserrat:500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../../css/buttontyd.css">
  <link rel="stylesheet" href="../../css/playertyd.css">
  <script src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons.js"></script>
</head>

<body>
    <!-- update the version number as needed -->
<script defer src="../../__/firebase/7.14.6/firebase-app.js"></script>
<!-- include only the Firebase features as you need -->
<script defer src="../../__/firebase/7.14.6/firebase-auth.js"></script>
<script defer src="../../__/firebase/7.14.6/firebase-database.js"></script>
<script defer src="../../__/firebase/7.14.6/firebase-messaging.js"></script>
<script defer src="../../__/firebase/7.14.6/firebase-storage.js"></script>
<script defer src="../../__/firebase/7.14.6/firebase-firestore.js"></script>
<!-- initialize the SDK after all desired features are loaded -->
<script defer src="../../__/firebase/init.js"></script>
<script src="../../firebase-utils.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
      try {
        let app = firebase.app();
        StariesAccount.Observer();
      } catch (e) {
        console.error(e);
      }
    });
  </script>
  <div id="progress"></div>
<br>
        <div class="switch"><span class="switch-text">Modo Oscuro:</span>
            <span class="inner-switch">OFF</span>
        </div>
  <div class="container">
    <h1>abstinencia</h1>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <div id="app-cover">
        <div id="bg-artwork"></div>
        <div id="bg-layer"></div>
        <div id="player">
            <div id="player-track">
                <div id="album-name"></div>
                <div id="track-name"></div>
                <div id="track-time">
                    <div id="current-time"></div>
                    <div id="track-length"></div>
                </div>
                <div id="s-area">
                    <div id="ins-time"></div>
                    <div id="s-hover"></div>
                    <div id="seek-bar"></div>
                </div>
            </div>
            <div id="player-content">
                <div id="album-art">
                    <img src="../../img/tyd/Oblivion6Art.png" class="active" id="_1">
                    <div id="buffer-box">Buffering ...</div>
                </div>
                <div id="player-controls">
                    <div class="control">
                        <div class="button" id="play-pause-button">
                            <ion-icon name="play-circle" id="iconoboton"></ion-icon>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <br>
    <br>
    <br>
    <br>
    <br>
    <span class="byline">Desmemoria 6</span><br><br><br>
    <span class="byline">Tonadas y Desmemorias - Gabriel Lobo</span>
    <p>&emsp;&emsp;—¿En qué piensas? —preguntaste con curiosidad.</p>
    <p>&emsp;&emsp;—Nada en específico, creo —contesté.</p>
    <p>&emsp;&emsp;—Mentira, estabas pensando en algo, o en varias cosas. Sé que tienes muchos pensamientos. ¡Vamos, lánzame uno!</p>
    <p>&emsp;&emsp;—¡Yo también! Aunque intento verle el lado bueno.</p>
    <p>&emsp;&emsp;—¿Y cuál sería?</p>
    <p>&emsp;&emsp;—Pues, al menos está lloviendo mientras aún estamos en el autobús. Aparte, ahora sé muchas cosas de ti que no sabía antes.</p>
    <p>&emsp;&emsp;—Bueno, tienes razón. Después de todo, creo que el simple hecho de estar acá ya es algo bueno, ¿no? —aunque mi motivo para afirmarlo fuera muy diferente al tuyo.</p>
    <p>&emsp;&emsp;—Pues sí.</p>
    <p>El retiro de Confirma fue una experiencia única por dónde se le vea. Empezando por el hecho de que pasé sin mi celular prácticamente un fin de semana. Como siempre, el trayecto hacia allá fue lo mejor que me pudo pasar.</p>
    <p>&emsp;&emsp;Confirma era uno de los únicos ambientes en los que podíamos estar a solas sin sentir que forzábamos el momento. Es decir, éramos el compañero del otro en ese círculo social. Era genial. Casi tan genial como cuando aceptaste sentarte conmigo en el autobús para ese retiro.</p>
    
    <p>&emsp;&emsp;—¿Qué opinas de las relaciones abiertas? —preguntaste para mi sorpresa.</p>
    <p>&emsp;&emsp;—Oh, bueno... supongo que está bien dependiendo de lo que crean las personas que la integran.</p>
    <p>&emsp;&emsp;—Es decir, sí, obvio. ¿Pero qué piensas tú?
    <br><br>&emsp;&emsp;—Mmmm... no se si formaría parte de una, creo que me gusta más la idea amar solo a una persona que te ame solo a ti. Al fin y al cabo, si regalamos nuestros sentimientos a cualquiera, dejaría de ser especial, ¿no?
    <br><br>&emsp;&emsp;—Sí, creo que te endiendo.</p>
    
    <p>&emsp;&emsp;La fórmula era difícil de aceptar, pero simple de entender. 1 fin de semana + 1 autobús + 0 celulares + 15 canciones católicas distintas + tú + yo. Debo admitir que me sentí muy estúpido en su momento. Es decir, era obvio que no ocurriría nada durante el viaje. ¿Por qué le di importancia a ello? Aún no lo sé. Lo que sí sé es que fue una de las mejores cosas que pude haber hecho.</p>
     <p>&emsp;&emsp;Durante ese trayecto, por primera vez en el año que tengo de conocerte, sentí que no éramos extraños. Por alguna razón, pese al tiempo que ha pasado, sigo sintiéndome así. Y no debería. Es decir, nos veíamos casi todos los días, nos enviábamos mensajes con frecuencia y hablábamos de temas profundos de cuando en cuando. Pero ese día sentí que por fin dejábamos de ser extraños. Quizás el hablar está sobrevalorado. Ese día, ni siquiera me esforzaba por sacar un tema de conversación o decir algo interesante. Llegamos a un punto en el que solo queríamos saber en qué diablos estaba pensando el otro. No debería funcionar, pero lo hizo.</p>
     <p>&emsp;&emsp;Tras terminar el viaje y llegar al lugar en donde nos quedaríamos el fin de semana, desempaqué y acomodé mis cosas en mi camarote. Chicos por un lado, chicas por el otro, y catequistas por otro lado. Ese día aprendí lo difícil que es conseguir que los adolescentes concilien el sueño en silencio. Durante el sábado en la mañana, rezamos y posteriormente fuimos a hacer un rally de estaciones alrededor de toda la finca. Para la hora del almuerzo, todos tuvimos que darnos una segunda ducha gracias al barro de la última estación.</p>
     <p>&emsp;&emsp;Después de almorzar, pasamos a un salón donde recibimos varios testimonios capaces de abrir incluso al más frío de los corazones. Al caer la noche, fuimos a cenar. Y al finalizar la cena, pensábamos que todo el día se había terminado. Sin embargo, para nuestra sorpresa, había una actividad más —la cual no explicaré para no arruinarle la experiencia a aquellos que aún no lo hayan vivido y vayan a vivirlo—. La noche de aquel sábado fue hermosa, y cerró con broche de oro cuando nos dieron las cartas de nuestros familiares, amigos y seres queridos. Derramé más de una lágrima en mi camarote ese día.</p>
     <p>&emsp;&emsp;Al salir el sol del domingo, sabíamos que sería hora de partir de vuelta a las instalaciones del instituto. Tuvimos una misa durante la mañana, luego almorzamos y comenzamos los preparativos para partir, no sin antes llenar de fotos la memoria de los celulares de nuestros catequistas. El viaje de regreso fue un poco más reflexivo que el anterior, pero lo disfruté muchísimo, a pesar de que no fuera un trayecto nocturno. Si estás con la persona correcta, la hora o el clima empiezan a importar poco.</p>
     <p>&emsp;&emsp;Al llegar al instituto, nos dimos cuenta de que nuestros padres, amigos y familia nos habían estado esperando para recibirnos muy alegres. Pese a la alegría, estaba demasiado cansado, y mi garganta estaba resentida conmigo por abusar de ella durante todo el fin de semana, y me lo recordaría durante toda la semana siguiente.</p>
     <p>&emsp;&emsp;Si hay algo del 2019 que me gustaría volver a vivir, sería ese retiro. Pude acercarme más a Dios, en una época en la que más lo necesitaba, y pude acercarme más a ti, en una época en la que menos me lo esperaba.</p>
     <p style="text-align:center;">*          *          *</p>
     <p>&emsp;&emsp;—Luces muy feliz para estar encerrado —exclama Ansiedad desde el exterior de la celda.

<br><br>&emsp;&emsp;—Pues sí, creo que recordé un lindo momento.

<br><br>&emsp;&emsp;—Diría que me alegra, pero sería mentira, y yo nunca te mentiría.

<br><br>&emsp;&emsp;—Tranquilo, me lo imaginé.

<br><br>&emsp;&emsp;—De acuerdo, entonces. ¿Terminaste?

<br><br>&emsp;&emsp;—¿Qué cosa?

<br><br>&emsp;&emsp;—El libro.

<br><br>&emsp;&emsp;—Aún no.

<br><br>&emsp;&emsp;—¿Entonces por qué pierdes el tiempo hablando conmigo? Apresúrate y escribe. No te queda mucho tiempo.

<br><br>&emsp;&emsp;—¿A qué te refieres?

<br><br>&emsp;&emsp;—A que ya casi es hora.

<br><br>&emsp;&emsp;—¿Hora de qué?

<br><br>&emsp;&emsp;—De despertar.</p>
    
    
  </div>
  <div class="col-md-12 text-center"style="z-index: 5;" align="center">
    <a class="btn btn-coffee btn-border" style="z-index: 3; margin-left: auto;margin-bottom: 100px; outline: none;color: #e77320; text-align: center;border-color: #e77320; font-size:20px;">Continuará...</a>
    <br>
    <a class="btn btn-coffee btn-border" href="../../Tonadas y Desmemorias.html#service" style="z-index: 3; margin-left: auto;margin-top: -150px; outline: none;color: #083244; text-align: center;border-color: #083244; font-size:20px;">Volver al Índice</a>
  </div>

</body>
<!-- partial -->
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
  <script src="../../js/scriptread.js"></script>
  <link rel="stylesheet" href="../../css/dark.css">
    <script src="../../js/dark.js"></script>
    <script type="text/javascript">
  $(function()
{
    var playerTrack = $("#player-track"), bgArtwork = $('#bg-artwork'), bgArtworkUrl, albumName = $('#album-name'), trackName = $('#track-name'), albumArt = $('#album-art'), sArea = $('#s-area'), seekBar = $('#seek-bar'), trackTime = $('#track-time'), insTime = $('#ins-time'), sHover = $('#s-hover'), playPauseButton = $("#play-pause-button"),  i = playPauseButton.find('ion-icon'), tProgress = $('#current-time'), tTime = $('#track-length'), seekT, seekLoc, seekBarPos, cM, ctMinutes, ctSeconds, curMinutes, curSeconds, durMinutes, durSeconds, playProgress, bTime, nTime = 0, buffInterval = null, tFlag = false, albums = ['talk is overrated'], trackNames = ['Jeremy Zucker feat. blackbear'], albumArtworks = ['_1'], trackUrl = ['desmemoria6.mp3'], playPreviousTrackButton = $('#play-previous'), playNextTrackButton = $('#play-next'), currIndex = -1;

    function playPause()
    {
        setTimeout(function()
        {
            if(audio.paused)
            {
                playerTrack.addClass('active');
                albumArt.addClass('active');
                checkBuffering();
                i.attr('name','pause');
                audio.play();
            }
            else
            {
                playerTrack.removeClass('active');
                albumArt.removeClass('active');
                clearInterval(buffInterval);
                albumArt.removeClass('buffering');
                i.attr('name','play-circle');
                audio.pause();
            }
        },300);
    }


	function showHover(event)
	{
		seekBarPos = sArea.offset();
		seekT = event.clientX - seekBarPos.left;
		seekLoc = audio.duration * (seekT / sArea.outerWidth());

		sHover.width(seekT);

		cM = seekLoc / 60;

		ctMinutes = Math.floor(cM);
		ctSeconds = Math.floor(seekLoc - ctMinutes * 60);

		if( (ctMinutes < 0) || (ctSeconds < 0) )
			return;

        if( (ctMinutes < 0) || (ctSeconds < 0) )
			return;

		if(ctMinutes < 10)
			ctMinutes = '0'+ctMinutes;
		if(ctSeconds < 10)
			ctSeconds = '0'+ctSeconds;

        if( isNaN(ctMinutes) || isNaN(ctSeconds) )
            insTime.text('--:--');
        else
		    insTime.text(ctMinutes+':'+ctSeconds);

		insTime.css({'left':seekT,'margin-left':'-21px'}).fadeIn(0);

	}

    function hideHover()
	{
        sHover.width(0);
        insTime.text('00:00').css({'left':'0px','margin-left':'0px'}).fadeOut(0);
    }

    function playFromClickedPos()
    {
        audio.currentTime = seekLoc;
		seekBar.width(seekT);
		hideHover();
    }

    function updateCurrTime()
	{
        nTime = new Date();
        nTime = nTime.getTime();

        if( !tFlag )
        {
            tFlag = true;
            trackTime.addClass('active');
        }

		curMinutes = Math.floor(audio.currentTime / 60);
		curSeconds = Math.floor(audio.currentTime - curMinutes * 60);

		durMinutes = Math.floor(audio.duration / 60);
		durSeconds = Math.floor(audio.duration - durMinutes * 60);

		playProgress = (audio.currentTime / audio.duration) * 100;

		if(curMinutes < 10)
			curMinutes = '0'+curMinutes;
		if(curSeconds < 10)
			curSeconds = '0'+curSeconds;

		if(durMinutes < 10)
			durMinutes = '0'+durMinutes;
		if(durSeconds < 10)
			durSeconds = '0'+durSeconds;

        if( isNaN(curMinutes) || isNaN(curSeconds) )
            tProgress.text('00:00');
        else
		    tProgress.text(curMinutes+':'+curSeconds);

        if( isNaN(durMinutes) || isNaN(durSeconds) )
            tTime.text('00:00');
        else
		    tTime.text(durMinutes+':'+durSeconds);

        if( isNaN(curMinutes) || isNaN(curSeconds) || isNaN(durMinutes) || isNaN(durSeconds) )
            trackTime.removeClass('active');
        else
            trackTime.addClass('active');


		seekBar.width(playProgress+'%');

		if( playProgress == 100 )
		{
			i.attr('name','play-circle');
			seekBar.width(0);
            tProgress.text('00:00');
            albumArt.removeClass('buffering').removeClass('active');
            clearInterval(buffInterval);
		}
    }

    function checkBuffering()
    {
        clearInterval(buffInterval);
        buffInterval = setInterval(function()
        {
            if( (nTime == 0) || (bTime - nTime) > 1000  )
                albumArt.addClass('buffering');
            else
                albumArt.removeClass('buffering');

            bTime = new Date();
            bTime = bTime.getTime();

        },100);
    }

    function selectTrack(flag)
    {
        if( flag == 0 || flag == 1 )
            ++currIndex;
        else
            --currIndex;

        if( (currIndex > -1) && (currIndex < albumArtworks.length) )
        {
            if( flag == 0 )
                i.attr('name','play-circle');
            else
            {
                albumArt.removeClass('buffering');
                i.attr('name','pause');
            }

            seekBar.width(0);
            trackTime.removeClass('active');
            tProgress.text('00:00');
            tTime.text('00:00');

            currAlbum = albums[currIndex];
            currTrackName = trackNames[currIndex];
            currArtwork = albumArtworks[currIndex];

            audio.src = trackUrl[currIndex];

            nTime = 0;
            bTime = new Date();
            bTime = bTime.getTime();

            if(flag != 0)
            {
                audio.play();
                playerTrack.addClass('active');
                albumArt.addClass('active');

                clearInterval(buffInterval);
                checkBuffering();
            }

            albumName.text(currAlbum);
            trackName.text(currTrackName);
            albumArt.find('img.active').removeClass('active');
            $('#'+currArtwork).addClass('active');

            bgArtworkUrl = $('#'+currArtwork).attr('src');

            bgArtwork.css({'background-image':'url('+bgArtworkUrl+')'});
        }
        else
        {
            if( flag == 0 || flag == 1 )
                --currIndex;
            else
                ++currIndex;
        }
    }

    function initPlayer()
	{
        audio = new Audio();

		selectTrack(0);

		audio.loop = true;

		playPauseButton.on('click',playPause);

		sArea.mousemove(function(event){ showHover(event); });

        sArea.mouseout(hideHover);

        sArea.on('click',playFromClickedPos);

        $(audio).on('timeupdate',updateCurrTime);

        playPreviousTrackButton.on('click',function(){ selectTrack(-1);} );
        playNextTrackButton.on('click',function(){ selectTrack(1);});
	}

	initPlayer();
});
  </script>
</body>
</html>
