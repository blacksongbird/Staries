<!DOCTYPE html>

<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Desmemoria 1</title>
  <link rel="stylesheet" href="../../css/styletyd.css">
  <link rel="shortcut icon" href="../../logo.ico">
  <script src="../../js/removeBanner.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css?family=Montserrat+Alternates:600|Montserrat:500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../../css/buttontyd.css">
  <link rel="stylesheet" href="../../css/playertyd.css">
  <script src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons.js"></script>
</head>

<body>
    <!-- update the version number as needed -->
<script defer src="../../__/firebase/7.14.6/firebase-app.js"></script>
<!-- include only the Firebase features as you need -->
<script defer src="../../__/firebase/7.14.6/firebase-auth.js"></script>
<script defer src="../../__/firebase/7.14.6/firebase-database.js"></script>
<script defer src="../../__/firebase/7.14.6/firebase-messaging.js"></script>
<script defer src="../../__/firebase/7.14.6/firebase-storage.js"></script>
<script defer src="../../__/firebase/7.14.6/firebase-firestore.js"></script>

<!-- initialize the SDK after all desired features are loaded -->
<script defer src="../../__/firebase/init.js"></script>
<script src="../../firebase-utils.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
      try {
        let app = firebase.app();
        StariesAccount.Observer();
      } catch (e) {
        console.error(e);
      }
    });
  </script>
  <div id="progress"></div>
<br>
        <div class="switch"><span class="switch-text">Modo Oscuro:</span>
            <span class="inner-switch">OFF</span>
        </div>
  <div class="container">
    <h1>ansiedad</h1>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <div id="app-cover">
        <div id="bg-artwork"></div>
        <div id="bg-layer"></div>
        <div id="player">
            <div id="player-track">
                <div id="album-name"></div>
                <div id="track-name"></div>
                <div id="track-time">
                    <div id="current-time"></div>
                    <div id="track-length"></div>
                </div>
                <div id="s-area">
                    <div id="ins-time"></div>
                    <div id="s-hover"></div>
                    <div id="seek-bar"></div>
                </div>
            </div>
            <div id="player-content">
                <div id="album-art">
                    <img src="../../img/tyd/Oblivion1Art.png" class="active" id="_1">
                    <div id="buffer-box">Buffering ...</div>
                </div>
                <div id="player-controls">
                    <div class="control">
                        <div class="button" id="play-pause-button">
                            <ion-icon name="play-circle" id="iconoboton"></ion-icon>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <br>
    <br>
    <br>
    <br>
    <br>
    <span class="byline">Desmemoria 1</span><br><br><br>
    <span class="byline">Tonadas y Desmemorias - Gabriel Lobo</span>
    <p>&emsp;&emsp;—Ni siquiera tengo música aquí, y lo sabes.
    <br><br>&emsp;&emsp;—Hace mucho que no nos veíamos. ¿Acaso volviste a pensar en Sea? ¿Qué diablos estás haciendo aquí, eh? —esto está comenzando a agotarme—.
    <br><br>&emsp;&emsp;—Cállate. No necesito tus estupideces ahora —digo mientras me levanto, dejando la máquina en el suelo, con el escrito a medio acabar—.
    <br><br>&emsp;&emsp;—¿Acaso alguna vez las necesitaste? Oh, sí, ya recuerdo, cada vez que escribes. ¿Sabes qué es irónico? Todavía me ves como un extraño, cuando hemos estado juntos desde que eras pequeño.
    <br><br>&emsp;&emsp;—Déjame en paz y lárgate. Necesito encontrar la salida.
    <br><br>&emsp;&emsp;—¿Te vas tan pronto? ¿No te gustó la máquina de escribir que armé para ti?
    <br><br>&emsp;&emsp;—Cállate.
    <br><br>&emsp;&emsp;—Me pides que haga lo único que no puedo hacer, Ty. Además, ¿desde cuándo eres tú quien manda entre nosotros, eh? No olvides que, sin mí, no eres nada. De no haber sido por mí, jamás habrías escrito Canciones y Recuerdos. Déjate de tonterías, ¿pretendes escribir el último libro sin mí? Como si fueras capaz de anotar una sola palabra que yo no te dicte. Por cierto, ¿cómo está Star, eh?
    <br><br>&emsp;&emsp;—No quiero hablar de eso.
    <br><br>&emsp;&emsp;—Es algo tarde, ¿no crees?
    <br><br>&emsp;&emsp;—Me gustaría que estuviera aquí...
    <br><br>&emsp;&emsp;—Todos lo queremos, así no tendríamos que leer sobre ello en cada maldito recuerdo que escribes. Pero eres un imbécil, incluso cuando no estoy. ¿En serio pensabas que podías tener amor sin dolor? Todo tiene un precio, ¿acaso no lo entiendes?
    <br><br>&emsp;&emsp;—Creí que bastaría ser yo mismo.
    <br><br>&emsp;&emsp;—Sí, definitivamente. Así como bastó con Sea, o Rebecca, o Roy, o Patrick, o Ever, o Franklin, o incluso con Jorge. Tienes que estar ciego para no ver que eso no basta. Y ahora estás aquí conmigo, encerrado de nuevo, por tu propia estupidez.
    <br><br>&emsp;&emsp;—Te dije que cerraras la boca.
    <br><br>&emsp;&emsp;—Sigues negándote a admitir que somos lo mismo, ¿verdad? Tú sin mí, no eres nada, y yo sin ti no tiene sentido. Mira a tu alrededor, Ty. Toda esta oscuridad y esta penumbra. Estamos en tu cabeza, ¿lo entiendes? Si quieres salir, lo harás conmigo, como siempre. Ni de chiste podrás encerrarme aquí y marcharte. Sé que estás molesto, pero tenemos un libro que terminar. ¿De verdad pretendes dejar la historia incompleta para ella? Es decir, tampoco es como si fuera a leerlo, de todos modos. Si no recuerdo mal, olvidaste decirle sobre nosotros, ¿verdad? Si no te quiere como eres ahora, ¿de verdad piensas que sentirá algo por ti al saber que me tienes? ¿Te desharás de tu mayor encanto por una chica, Tyler?
    <br><br>&emsp;&emsp;—Si pudiera elegir, ya no existirías.
    <br><br>&emsp;&emsp;—¿Escuchas las idioteces que dices? Me dijiste que me quieres fuera de tu vida, es algo difícil de digerir, ¿sabes? Pues te diré algo, me iré cuando mueras, pero ninguno de los dos ha muerto aún.
    <br><br>&emsp;&emsp;—¿Qué demonios es lo que quieres?
    <br><br>&emsp;&emsp;—¿Yo? Pues yo ya tengo todo lo que necesito acá dentro. Discutir contigo para hacerte la vida indecisa e imposible es solo un pasatiempo. 
    <br><br>&emsp;&emsp;—Pues temo que tu pasatiempo se acabó, porque me largo —contesto mientras me alejo caminando, sin una dirección clara de hacia dónde voy.
    <br><br>&emsp;&emsp;—¿Y te parece que ignorarme es la llave para escapar de esta prisión? De verdad estás más trastornado que yo. Pero espera. Si yo soy tú, ¿cómo es eso posible? Vaya que esto es extraño.
    <br><br>&emsp;&emsp;—No tengo tiempo para tus estupideces, Ansiedad. ¿Por qué no me dejas en paz y te largas?
    <br><br>&emsp;&emsp;—Porque no es tan sencillo, Tyler. Yo no puedo dejarte salir aunque quiera. Si acabaste aquí, es porque es mi deber torturarte hasta que despiertes. Así que al menos sé considerado con tu verdugo y trata de hablar conmigo, que ya me aburrí de las mismas preguntas una y otra y otra vez. Dime, ¿qué estupideces hiciste este año? Porque estoy seguro de que no le contaste ni la mitad de las cosas que pasaron por vergüenza. Si vas a seguir con la historia, al menos di la verdad y déjate de rodeos. Vamos, siéntate —ordena mientras me empuja a una silla justo detrás de mí, que obviamente no estaba ahí antes. Está claro que él controla el lugar, eso es lo que me quiere decir.
    <br><br>&emsp;&emsp;—Está bien, ¿qué sugieres?
    <br><br>&emsp;&emsp;—Simple —dice mientras chasquea sus dedos, solo para que un escritorio dañado y maltratado aparezca justo frente a mí, al son del chasquido, con una lámpara y la máquina de escribir de antes sobre sí—. Termina el libro, aquí y ahora.
    <br><br>&emsp;&emsp;—Imposible, tomaría demasiado tiempo.
    <br><br>&emsp;&emsp;—No me importa, no saldrás de aquí sin ese manuscrito terminado.
    <br><br>&emsp;&emsp;—Pues es una lástima que ya no tenga tinta ni papel —digo sarcásticamente para ponerlo en jaque.
    <br><br>&emsp;&emsp;—Tranquilo —dice mientras vuelve a chasquear los dedos para hacer aparecer una gran cantidad de papel sobre el escritorio, junto con un cuchillo y un recipiente de vidrio, similar a los que usaba en los laboratorios de ciencia del instituto.
    <br><br>&emsp;&emsp;—¿Para qué el cuchillo?
    <br><br>&emsp;&emsp;—Querías tinta, ¿no? —contesta al mismo tiempo que toma mi brazo con fuerza, empuñando el cuchillo. Trato de resistirme, pero aún así, la daga divide mi piel, dando rienda suelta al dolor y ardor proveniente de mi brazo, mientras mi sangre comienza a salir a gorgoteos. Bajo mi mano se encuentra el recipiente en el cual cae cada gota de mi sangre. Grito a causa del dolor de la herida, pero Ansiedad me sostiene para que gotee la cantidad de sangre suficiente para llenar el envase. ¿Cómo es posible que pueda dolerme algo tan surrealista?
    <br><br>&emsp;&emsp;—¡Maldición! ¡¿Por qué no simplemente hiciste aparecer un envase de tinta?!
    <br><br>&emsp;&emsp;—Eso no habría sido tan divertido, ¿o sí? —contesta mientras rellena la máquina con mi propia sangre— Listo, ahora no te puedes quejar. Ya tienes tu papel y tu maldita tinta. A escribir, idiota.
    <br><br>&emsp;&emsp;—Al menos dame algo con que vendar la herida, o no acabaremos nunca.
    <br><br>&emsp;&emsp;—De acuerdo, eres un llorón, Tyler —dice mientras chasquea los dedos para hacer aparecer un pañuelo con muchos hoyos y manchas cuya procedencia no quiero averiguar.
    <br><br>&emsp;&emsp;—¿Por dónde quieres que empiece?
    <br><br>&emsp;&emsp;—Tú eres el escritor, ¿no? Usa tu cabeza para pensar un poco.
    <br><br>&emsp;&emsp;—En vista de que dijiste que no podría escribir nada que tú no me dictaras, supuse que sabrías por dónde empezar.
    <br><br>&emsp;&emsp;—De acuerdo, bien jugado. Empieza por el principio de décimo año. El 2019 fue muy divertido, al menos para mí, ¿no crees? Bueno, al menos desde que terminé con Sea por ti. Vamos, no me mires así, sabes que te hice un favor.
    <br><br>Acerco la silla al escritorio, acomodo el papel y ajusto el tabulador. Respiro profundamente y hago memoria. De repente, el alrededor que parecía pura oscuridad y penumbra se iluminó por un instante. Frente a mí, un pequeño cuadro proyectaba cada una de mis memorias, acompañadas por una canción.
    <br><br>&emsp;&emsp;—Apresúrate. No tengo todo el tiempo del mundo.
    </p>
  </div>
  <div class="col-md-12 text-center"style="z-index: 5;" align="center">
    <a class="btn btn-coffee btn-border" style="z-index: 3; margin-left: auto;margin-bottom: 100px; outline: none;color: #e77320; text-align: center;border-color: #e77320; font-size:20px;">Continuará...</a>
    <br>
    <a class="btn btn-coffee btn-border" href="../../Tonadas y Desmemorias.html#service" style="z-index: 3; margin-left: auto;margin-top: -150px; outline: none;color: #083244; text-align: center;border-color: #083244; font-size:20px;">Volver al Índice</a>
  </div>

</body>
<!-- partial -->
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
  <script src="../../js/scriptread.js"></script>
  <link rel="stylesheet" href="../../css/dark.css">
    <script src="../../js/dark.js"></script>
    <script type="text/javascript">
  $(function()
{
    var playerTrack = $("#player-track"), bgArtwork = $('#bg-artwork'), bgArtworkUrl, albumName = $('#album-name'), trackName = $('#track-name'), albumArt = $('#album-art'), sArea = $('#s-area'), seekBar = $('#seek-bar'), trackTime = $('#track-time'), insTime = $('#ins-time'), sHover = $('#s-hover'), playPauseButton = $("#play-pause-button"),  i = playPauseButton.find('ion-icon'), tProgress = $('#current-time'), tTime = $('#track-length'), seekT, seekLoc, seekBarPos, cM, ctMinutes, ctSeconds, curMinutes, curSeconds, durMinutes, durSeconds, playProgress, bTime, nTime = 0, buffInterval = null, tFlag = false, albums = ['Intro III'], trackNames = ['NF'], albumArtworks = ['_1'], trackUrl = ['desmemoria1.mp3'], playPreviousTrackButton = $('#play-previous'), playNextTrackButton = $('#play-next'), currIndex = -1;

    function playPause()
    {
        setTimeout(function()
        {
            if(audio.paused)
            {
                playerTrack.addClass('active');
                albumArt.addClass('active');
                checkBuffering();
                i.attr('name','pause');
                audio.play();
            }
            else
            {
                playerTrack.removeClass('active');
                albumArt.removeClass('active');
                clearInterval(buffInterval);
                albumArt.removeClass('buffering');
                i.attr('name','play-circle');
                audio.pause();
            }
        },300);
    }


	function showHover(event)
	{
		seekBarPos = sArea.offset();
		seekT = event.clientX - seekBarPos.left;
		seekLoc = audio.duration * (seekT / sArea.outerWidth());

		sHover.width(seekT);

		cM = seekLoc / 60;

		ctMinutes = Math.floor(cM);
		ctSeconds = Math.floor(seekLoc - ctMinutes * 60);

		if( (ctMinutes < 0) || (ctSeconds < 0) )
			return;

        if( (ctMinutes < 0) || (ctSeconds < 0) )
			return;

		if(ctMinutes < 10)
			ctMinutes = '0'+ctMinutes;
		if(ctSeconds < 10)
			ctSeconds = '0'+ctSeconds;

        if( isNaN(ctMinutes) || isNaN(ctSeconds) )
            insTime.text('--:--');
        else
		    insTime.text(ctMinutes+':'+ctSeconds);

		insTime.css({'left':seekT,'margin-left':'-21px'}).fadeIn(0);

	}

    function hideHover()
	{
        sHover.width(0);
        insTime.text('00:00').css({'left':'0px','margin-left':'0px'}).fadeOut(0);
    }

    function playFromClickedPos()
    {
        audio.currentTime = seekLoc;
		seekBar.width(seekT);
		hideHover();
    }

    function updateCurrTime()
	{
        nTime = new Date();
        nTime = nTime.getTime();

        if( !tFlag )
        {
            tFlag = true;
            trackTime.addClass('active');
        }

		curMinutes = Math.floor(audio.currentTime / 60);
		curSeconds = Math.floor(audio.currentTime - curMinutes * 60);

		durMinutes = Math.floor(audio.duration / 60);
		durSeconds = Math.floor(audio.duration - durMinutes * 60);

		playProgress = (audio.currentTime / audio.duration) * 100;

		if(curMinutes < 10)
			curMinutes = '0'+curMinutes;
		if(curSeconds < 10)
			curSeconds = '0'+curSeconds;

		if(durMinutes < 10)
			durMinutes = '0'+durMinutes;
		if(durSeconds < 10)
			durSeconds = '0'+durSeconds;

        if( isNaN(curMinutes) || isNaN(curSeconds) )
            tProgress.text('00:00');
        else
		    tProgress.text(curMinutes+':'+curSeconds);

        if( isNaN(durMinutes) || isNaN(durSeconds) )
            tTime.text('00:00');
        else
		    tTime.text(durMinutes+':'+durSeconds);

        if( isNaN(curMinutes) || isNaN(curSeconds) || isNaN(durMinutes) || isNaN(durSeconds) )
            trackTime.removeClass('active');
        else
            trackTime.addClass('active');


		seekBar.width(playProgress+'%');

		if( playProgress == 100 )
		{
			i.attr('name','play-circle');
			seekBar.width(0);
            tProgress.text('00:00');
            albumArt.removeClass('buffering').removeClass('active');
            clearInterval(buffInterval);
		}
    }

    function checkBuffering()
    {
        clearInterval(buffInterval);
        buffInterval = setInterval(function()
        {
            if( (nTime == 0) || (bTime - nTime) > 1000  )
                albumArt.addClass('buffering');
            else
                albumArt.removeClass('buffering');

            bTime = new Date();
            bTime = bTime.getTime();

        },100);
    }

    function selectTrack(flag)
    {
        if( flag == 0 || flag == 1 )
            ++currIndex;
        else
            --currIndex;

        if( (currIndex > -1) && (currIndex < albumArtworks.length) )
        {
            if( flag == 0 )
                i.attr('name','play-circle');
            else
            {
                albumArt.removeClass('buffering');
                i.attr('name','pause');
            }

            seekBar.width(0);
            trackTime.removeClass('active');
            tProgress.text('00:00');
            tTime.text('00:00');

            currAlbum = albums[currIndex];
            currTrackName = trackNames[currIndex];
            currArtwork = albumArtworks[currIndex];

            audio.src = trackUrl[currIndex];

            nTime = 0;
            bTime = new Date();
            bTime = bTime.getTime();

            if(flag != 0)
            {
                audio.play();
                playerTrack.addClass('active');
                albumArt.addClass('active');

                clearInterval(buffInterval);
                checkBuffering();
            }

            albumName.text(currAlbum);
            trackName.text(currTrackName);
            albumArt.find('img.active').removeClass('active');
            $('#'+currArtwork).addClass('active');

            bgArtworkUrl = $('#'+currArtwork).attr('src');

            bgArtwork.css({'background-image':'url('+bgArtworkUrl+')'});
        }
        else
        {
            if( flag == 0 || flag == 1 )
                --currIndex;
            else
                ++currIndex;
        }
    }

    function initPlayer()
	{
        audio = new Audio();

		selectTrack(0);

		audio.loop = true;

		playPauseButton.on('click',playPause);

		sArea.mousemove(function(event){ showHover(event); });

        sArea.mouseout(hideHover);

        sArea.on('click',playFromClickedPos);

        $(audio).on('timeupdate',updateCurrTime);

        playPreviousTrackButton.on('click',function(){ selectTrack(-1);} );
        playNextTrackButton.on('click',function(){ selectTrack(1);});
	}

	initPlayer();
});
  </script>
</body>
</html>
